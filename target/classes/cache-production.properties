# 缓存系统生产环境配置
# Cache System Production Configuration

# ========================================
# 基础缓存配置 Basic Cache Configuration
# ========================================

# 缓存容量限制 (任务数量)
cache.max.capacity=10000

# 缓存TTL配置 (小时)
cache.ttl.default=24
cache.ttl.popular=72
cache.ttl.recent=12

# 相似度阈值配置
cache.similarity.exact.threshold=0.95
cache.similarity.high.threshold=0.85
cache.similarity.medium.threshold=0.70

# ========================================
# 缓存清理配置 Cache Cleanup Configuration
# ========================================

# 清理触发阈值
cache.cleanup.capacity.threshold=0.85
cache.cleanup.memory.threshold=0.80

# 清理策略权重
cache.cleanup.weight.hit.count=0.3
cache.cleanup.weight.last.access=0.4
cache.cleanup.weight.creation.time=0.2
cache.cleanup.weight.file.size=0.1

# 清理批次大小
cache.cleanup.batch.size=100

# ========================================
# 缓存预热配置 Cache Warmup Configuration
# ========================================

# 预热任务数量限制
cache.warmup.popular.limit=500
cache.warmup.time.pattern.limit=200
cache.warmup.user.behavior.limit=300
cache.warmup.similar.limit=100

# 预热触发条件
cache.warmup.hit.rate.threshold=0.60
cache.warmup.capacity.threshold=0.30
cache.warmup.interval.hours=2

# 预热时间窗口 (小时)
cache.warmup.time.window=168

# ========================================
# 性能监控配置 Performance Monitoring
# ========================================

# 健康检查阈值
cache.health.hit.rate.warning=0.70
cache.health.hit.rate.critical=0.50
cache.health.response.time.warning=100
cache.health.response.time.critical=500
cache.health.capacity.warning=0.80
cache.health.capacity.critical=0.90

# 指标收集配置
cache.metrics.history.retention.days=30
cache.metrics.collection.interval.minutes=15
cache.metrics.hotspot.threshold=10

# ========================================
# 调度任务配置 Scheduled Tasks Configuration
# ========================================

# 缓存清理调度 (cron表达式)
cache.schedule.cleanup.cron=0 */30 * * * *

# 缓存预热调度
cache.schedule.warmup.cron=0 0 */2 * * *

# 统计输出调度
cache.schedule.statistics.cron=0 0 * * * *

# 指标收集调度
cache.schedule.metrics.cron=0 */15 * * * *

# 深夜维护调度
cache.schedule.maintenance.cron=0 0 2 * * *

# ========================================
# 文件管理配置 File Management Configuration
# ========================================

# 文件存储路径
cache.file.storage.path=/data/cache/models
cache.file.temp.path=/tmp/cache

# 文件大小限制 (MB)
cache.file.max.size=100
cache.file.total.size.limit=10240

# 文件清理配置
cache.file.cleanup.age.days=7
cache.file.cleanup.size.threshold=0.85

# ========================================
# 并发控制配置 Concurrency Configuration
# ========================================

# 线程池配置
cache.thread.pool.core.size=10
cache.thread.pool.max.size=50
cache.thread.pool.queue.capacity=1000
cache.thread.pool.keep.alive.seconds=60

# 并发限制
cache.concurrent.operations.limit=100
cache.concurrent.warmup.limit=5

# ========================================
# 日志配置 Logging Configuration
# ========================================

# 日志级别
logging.level.com.qiniu.model3d.service.cache=INFO

# 性能日志
cache.logging.performance.enabled=true
cache.logging.performance.threshold.ms=1000

# 统计日志
cache.logging.statistics.enabled=true
cache.logging.statistics.interval.minutes=60

# ========================================
# 监控告警配置 Monitoring and Alerting
# ========================================

# 告警阈值
cache.alert.hit.rate.threshold=0.60
cache.alert.error.rate.threshold=0.05
cache.alert.capacity.threshold=0.85
cache.alert.response.time.threshold=200

# 告警通知配置
cache.alert.notification.enabled=true
cache.alert.notification.email=admin@qiniu.com
cache.alert.notification.webhook=https://hooks.slack.com/services/xxx

# ========================================
# 开发和调试配置 Development and Debug
# ========================================

# 调试模式
cache.debug.enabled=false
cache.debug.log.cache.operations=false
cache.debug.log.similarity.calculations=false

# 性能分析
cache.profiling.enabled=false
cache.profiling.sample.rate=0.01

# ========================================
# 环境特定配置 Environment Specific
# ========================================

# 生产环境标识
spring.profiles.active=production

# JVM配置建议
# -Xms2g -Xmx4g -XX:+UseG1GC -XX:MaxGCPauseMillis=200
# -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/cache-heap-dump.hprof

# 数据库连接池配置
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000